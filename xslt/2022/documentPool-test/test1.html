<!doctype html>
<html lang=en>
<head>
  <meta charset=utf-8>
  <title>SaxonJS documentPool test 1</title>
  <script src="/Saxon-JS-2.4/SaxonJS2.rt.js"></script>
  <script>
  document.addEventListener('DOMContentLoaded', () => {
    const uris = [ 'input1.xml' ].map(uri => new URL(uri, location.href).href);
    Promise.all(uris.map((uri, pos) => SaxonJS.getResource({location : uri, type : 'xml'}))).then(resources => {
      const docPool = {};
      resources.forEach((r, p) => docPool[uris[p]] = r);
      return SaxonJS.transform({ stylesheetLocation: 'sheet1.xsl.sef.json', destination : 'appendToBody', documentPool : docPool}, 'async');
      })
      .then(res => console.log('Initial transformation successful.'))
      .catch(err => console.log('Initial transformation failed.', err))
    });
  </script>
</head>
<body>

</body>
</html>