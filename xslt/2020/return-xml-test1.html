<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Saxon-JS async test</title>
  <script src="../../SaxonJS2/SaxonJS2.rt.js"></script>
  <script>
    document.addEventListener(
      'DOMContentLoaded',
      evt => {
        SaxonJS.transform(
          {
            'stylesheetLocation': 'return-xml-test1.sef',
            'destination': 'document',
            'resultForm': 'default',
            'deliverResultDocument': uri => {
              return {
                'destination': 'document',
                'save': (url, content, encoding) => {
                  console.log(url);
                  console.log(content);
                }
              }
            }
          },
          'async'
        )
          .then(result => console.log(result))
          .catch(error => console.log(error));

      },
      false
    );
  </script>
</head>
<body>
  <h1></h1>
  <section>
    <h2>Results</h2>
    <div id="results"></div>
  </section>
</body>
</html>