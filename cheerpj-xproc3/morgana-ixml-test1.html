<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Running MorganaXProc-III with CheerpJ</title>
  <script src="https://cjrtnc.leaningtech.com/4.1/loader.js"></script>
</head>
<body>

<script>
  var xproc3Code = `<p:declare-step name="ixml-test1" xmlns:p="http://www.w3.org/ns/xproc"
    xmlns:c="http://www.w3.org/ns/xproc-step" version="3.1">
    <p:input port="source" primary="true">
        <p:inline content-type="text/plain">26 March 2025</p:inline>
    </p:input>
    <p:input port="grammar">
        <p:inline content-type="text/plain">date: s?, day, s, month, (s, year)? .
-s: -" "+ .
day: digit, digit? .
-digit: "0"; "1"; "2"; "3"; "4"; "5"; "6"; "7"; "8"; "9".
month: "January"; "February"; "March"; "April";
"May"; "June"; "July"; "August";
"September"; "October"; "November"; "December".
year: (digit, digit)?, digit, digit .</p:inline>
    </p:input>
    <p:output port="result"/>
    <p:invisible-xml>
        <p:with-input port="grammar" pipe="grammar@ixml-test1"/>
    </p:invisible-xml>
</p:declare-step>`;

  (async function () {
    await cheerpjInit({version:11});
    //cheerpjCreateDisplay(800, 600);
    cheerpOSAddStringFile("/str/pipeline.xpl", xproc3Code);
    const exitCode = await cheerpjRunMain("com.xml_project.morganaxproc3.XProcEngine", "/app/cheerpj-xproc3/MorganaXProc-IIIse_lib/BlitzMarkupConnector.jar:/app/cheerpj-xproc3/MorganaXProc-IIIse_lib/htmlparser-1.4.15.jar:/app/cheerpj-xproc3/MorganaXProc-IIIse_lib/jing.jar:/app/cheerpj-xproc3/MorganaXProc-IIIse_lib/markup-blitz-1.6.jar:/app/cheerpj-xproc3/MorganaXProc-IIIse_lib/NineMLConnector.jar:/app/cheerpj-xproc3/MorganaXProc-IIIse_lib/httpclient-4.5.10.jar:/app/cheerpj-xproc3/MorganaXProc-IIIse_lib/json-schema-validator-1.0.79.jar:/app/cheerpj-xproc3/MorganaXProc-IIIse_lib/Saxon10Connector.jar:/app/cheerpj-xproc3/MorganaXProc-IIIse_lib/httpcore-4.4.12.jar:/app/cheerpj-xproc3/MorganaXProc-IIIse_lib/kryo-4.0.1.jar:/app/cheerpj-xproc3/MorganaXProc-IIIse_lib/Saxon11Connector.jar:/app/cheerpj-xproc3/MorganaXProc-IIIse_lib/httpmime-4.5.10.jar:/app/cheerpj-xproc3/MorganaXProc-IIIse_lib/quasar-actors-0.7.9.jar:/app/cheerpj-xproc3/MorganaXProc-IIIse_lib/Saxon12-3Connector.jar:/app/cheerpj-xproc3/MorganaXProc-IIIse_lib/itu-1.7.0.jar:/app/cheerpj-xproc3/MorganaXProc-IIIse_lib/quasar-core-0.7.9.jar:/app/cheerpj-xproc3/MorganaXProc-IIIse_lib/Saxon12Connector.jar:/app/cheerpj-xproc3/MorganaXProc-IIIse_lib/jackson-annotations-2.14.2.jar:/app/cheerpj-xproc3/MorganaXProc-IIIse_lib/saxon-he-12.5.jar:/app/cheerpj-xproc3/MorganaXProc-IIIse_lib/Saxon99Connector.jar:/app/cheerpj-xproc3/MorganaXProc-IIIse_lib/jackson-core-2.14.2.jar:/app/cheerpj-xproc3/MorganaXProc-IIIse_lib/slf4j-api-1.7.36.jar:/app/cheerpj-xproc3/MorganaXProc-IIIse_lib/commons-codec-1.11.jar:/app/cheerpj-xproc3/MorganaXProc-IIIse_lib/jackson-databind-2.14.2.jar:/app/cheerpj-xproc3/MorganaXProc-IIIse_lib/slf4j-nop-1.7.36.jar:/app/cheerpj-xproc3/MorganaXProc-IIIse_lib/commons-lang3-3.12.0.jar:/app/cheerpj-xproc3/MorganaXProc-IIIse_lib/jackson-dataformat-yaml-2.14.2.jar:/app/cheerpj-xproc3/MorganaXProc-IIIse_lib/snakeyaml-1.33.jar:/app/cheerpj-xproc3/MorganaXProc-IIIse_lib/commons-logging-1.2.jar:/app/cheerpj-xproc3/MorganaXProc-IIIse_lib/javax.activation-1.2.0.jar:/app/cheerpj-xproc3/MorganaXProc-IIIse_lib/xmlresolver-6.0.14.jar:/app/cheerpj-xproc3/MorganaXProc-IIIse_lib/guava-23.0.jar:/app/cheerpj-xproc3/MorganaXProc-IIIse_lib/javax.mail-1.6.2.jar:/app/cheerpj-xproc3/MorganaXProc-IIIse.jar", "/str/pipeline.xpl", "-ixml-connector=com.xml_project.morganaxproc3.markupblitzConnector.MarkupBlitzConnector");
    console.log(`MorganaXProc-III exited with code ${exitCode}`);
  })();
</script>

</body>
</html>