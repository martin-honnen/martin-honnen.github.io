<!doctype html>
<html lang=en>
  <head>
    <meta charset=utf-8>
    <title>Test CheerpJ nightly with Java 12 support with BaseX</title>
    <!--<script src="https://cjrtnc.leaningtech.com/20250522_2392/loader.js"></script>-->
    <!--<script src="https://cjrtnc.leaningtech.com/20250526_2407/loader.js"></script>-->
    <script src="https://cjrtnc.leaningtech.com/4.1/loader.js"></script>
  </head>
  <body>
    <script>
    const xquery = `declare namespace map = "http://www.w3.org/2005/xpath-functions/map";
declare namespace array = "http://www.w3.org/2005/xpath-functions/array";

declare namespace output = "http://www.w3.org/2010/xslt-xquery-serialization";

declare option output:method 'html';
declare option output:html-version '5';

.`;
    const input = `<?xml version="1.0" encoding="utf-8"?>
<html lang="en">
  <head>
    <title>CheerpJ BaseX 12 XQuery fiddle</title>
  </head>
  <body>
    <section>
      <h1>Release 0.0.1 alpha</h1>
      <section>
        <h2>Features using BaseX 12</h2>
        <ul>
          <li>XQuery 3.1 and experimental XQuery 4.0 against XML or JSON input or no input</li>
          <li>optional automatic evaluation of XQuery as CheerpJ also allows to run Java code (e.g. BaseX) from a web worker</li>
          <li>output pane should now switch the used editor to the output mode based on the used serialization method/option of the XQuery code</li>
        </ul>
      </section>
      <p>BaseX 12 is Copyright (c) BaseX Team and used under <a href="https://github.com/BaseXdb/basex/blob/main/LICENSE">The BSD 3-Clause License</a>.</p>
      <p>CheerpJ is used under <a href="https://cheerpj.com/docs/licensing">the community license</a> that is free to use for personal projects.</p>
    </section>
  </body>
</html>`;

    (async function () {

      await cheerpjInit({version:17});

      var lib = null;

      var Context = null;

      var QueryProcessor = null;

      var QueryException = null;

      var Value = null;

      var Iter = null;

      var Serializer = null;

      var OutputSerializer = null;

      var SerializerOptions = null;

      var BaseX12Helper = null;

      var StringReader = null;

      var StringWriter = null;

      var StreamSource = null;

      var ByteArrayOutputStream = null;

      var URI = null;

      var JException = null;

      var basexInitialized = false;

      var context = null;

      var queryProcessor = null;

      const exitCode = await cheerpjRunMain("org.basex.BaseX", "/app/cheerpj-basex12-fiddle/BaseX.jar:/app/cheerpj-basex12-fiddle/CheerpJBaseX12Helper.jar:/app/cheerpj-basex12-fiddle/lib/basex-api-12.0-SNAPSHOT.jar:/app/cheerpj-basex12-fiddle/lib/htmlparser-1.4.16.jar:/app/cheerpj-basex12-fiddle/lib/markup-blitz-1.8.jar:/app/cheerpj-basex12-fiddle/lib/jing-20220510.jar:/app/cheerpj-basex12-fiddle/lib/lucene-stemmers-3.4.0.jar:/app/cheerpj-basex12-fiddle/lib/jline-2.14.6.jar:/app/cheerpj-basex12-fiddle/lib/custom/saxon-he-12.7.jar", xquery);
        console.log(`BaseX exited with code ${exitCode}`);
      })();
    </script>
  </body>
</html>  

  
